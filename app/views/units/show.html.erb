<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="#">
      <%= link_to "Home", root_path %>
    </a></li>
    <li class="breadcrumb-item"><a href="#">
    <%= link_to @address.combadd.titleize, address_path(@address) %>
    </a></li>
    <li class="breadcrumb-item active" aria-current="page">
      <%= link_to "Unit " + @unit.number, address_unit_path(@address, @unit) %>
    </li>
  </ol>
</nav>

<div class="row">
  <div class="col">
    <h1><%= @address.combadd.titleize %></h1>
    <h2>Unit <%= @unit.number.upcase %></h2>
  </div>
  <div class="col">
    <div class="float-end">
      <%= link_to "Edit Unit", edit_address_unit_path(@address, @unit), class: "btn btn-primary" %>
      <%= link_to "Delete Unit", address_unit_path(@address, @unit), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %>
    </div>
  </div>
</div>

<div class="row mt-5">
  <div class="col">
    <nav class="nav nav-pills nav-fill">
      <a class="nav-item nav-link active" href="#" data-bs-toggle="tab" data-bs-target="#comment">
        <i class="bi bi-chat-dots"></i> <%= pluralize(@unit.comments.count, "Comment") %>
      </a>
      <a class="nav-item nav-link" href="#" data-bs-toggle="tab" data-bs-target="#violation">
        <i class="bi bi-exclamation-triangle-fill"></i> <%= pluralize(@unit.violations.count, "Violation") %>
      </a>
      <a class="nav-item nav-link" href="#" data-bs-toggle="tab" data-bs-target="#citation">
        <i class="bi bi-file-earmark-text-fill"></i> <%= pluralize(@unit.citations.count, "Citation") %>
      </a>
      <a class="nav-item nav-link disabled" href="#" data-bs-toggle="tab" data-bs-target="#inspection">
        <i class="bi bi-clipboard-check"></i> <%#= pluralize(@address.inspections.count, "Inspection") %> Inspections
      </a>
    </nav>

    <div class="tab-content">
      <div class="tab-pane fade show active" id="comment">
      <br>
        <% @unit.comments.order("created_at DESC").each do |comment| %>
          <%= render 'comments/comments', comment: comment, show_address_info: false, show_edit_link: true, show_unit_info: false %>
        <% end %>
      </div>
      <div class="tab-pane fade " id="violation">
    <div style="text-align: center">
      <%= link_to "Create a Violation Notice/Doorhanger", new_address_violation_path(@address, unit: @unit), class: "btn btn-danger btn-lg mt-5", data: { turbo: false } %>
    </div>
    <br>
    <% if @unit.violations.any? %>
    <div class="table-responsive" style="text-align: center">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Address</th>
            <th scope="col">Created By</th>
            <th scope="col">Created At</th>
            <th scope="col">Violation Type</th>
            <th scope="col">Code</th>
            <th scope="col">Deadline Date</th>
            <th scope="col">Citations</th>
          </tr>
        </thead>
        <tbody>
          <% @unit.violations.order("created_at DESC").each do |violation| %>
            <%= render partial: "shared/violation_table", locals: {violation: violation} %>
          <% end %>
        </tbody>
      </table>
    </div>
    <% else %>
    <p style="text-align: center">No violations have been created for this address.</p>
    <% end %>
      </div>
      <div class="tab-pane fade " id="citation">
    <% if @unit.citations.any? %>
    <div class="table-responsive" style="text-align: center">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Citation ID</th>
            <th scope="col">Address</th>
            <th scope="col">Created By</th>
            <th scope="col">Created At</th>
            <th scope="col">Fine</th>
            <th scope="col">Status</th>
            <th scope="col">Code</th>
            <th scope="col">Deadline Date</th>
          </tr>
        </thead>
        <tbody>
          <% @unit.citations.each do |citation| %>
            <%= render partial: "shared/citation_table", locals: {citation: citation} %>
          <% end %>
        </tbody>
      </table>
    </div>
    <% end %>
    </div>
      <div class="tab-pane fade" id="inspection">
        This is the inspection tab.
    </div>


  </div>
</div>