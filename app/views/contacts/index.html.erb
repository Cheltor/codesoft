<!-- app/views/contacts/index.html.erb -->


  <div class="card" style="background-color: #e3f2fd;">
    <div class="card-body">
      <%= search_form_for @contact_q, url: contacts_path, method: :get do |f| %>
      <%= f.search_field :name_or_email_or_phone_cont, class:"form-control form-control-lg", placeholder: "Search contacts" %>
      <br><div style="text-align:center"><%= f.submit "Search", class:"btn btn-primary" %></div>
      <% end %>
    </div>
  </div>
  <br>

<h1>Contacts</h1>

<% if @contact_q.result.count == 0 %>
  <p>No contacts found.</p>
<% else %>
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Notes</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @contacts.each do |contact| %>
        <tr>
          <td><%= link_to contact.name, contact_path(contact) %></td>
          <td><%= link_to contact.email, "mailto:#{contact.email}" %></td>
          <td><a href="tel:<%= contact.phone %>"><%= format_phone_number(contact.phone) %></a></td>
          <td><%= contact.notes %></td>
          <% if contact.notes != "" %>
          <td><%= link_to 'Edit Notes', add_notes_contact_path(contact), class: 'btn btn-secondary' %></td>
          <% else %>
          <td><%= link_to 'Add Notes', add_notes_contact_path(contact), class: 'btn btn-secondary' %></td>
          <% end %>
          <td><%= link_to 'Edit', edit_contact_path(contact), class: 'btn btn-secondary' %></td>
          <td><%= link_to 'Delete', contact, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<% end %>
<%= link_to 'New Contact', new_contact_path, class: 'btn btn-primary' %>
